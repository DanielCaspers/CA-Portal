<div class="my-account-container">
	<div fxLayout.gt-sm="row" fxLayout.lt-lg="column" fxLayoutAlign.gt-sm="space-evenly start" fxLayoutAlign.lt-lg="space-between center" fxLayoutGap="8px">
		<mat-card>
			<mat-card-header>
				<mat-card-title>Address</mat-card-title>
			</mat-card-header>
			<mat-card-content>
				<form [formGroup]="addressFormGroup" fxLayout="column" fxLayoutGap="5px" fxFill>
					<mat-form-field fxFlex>
						<input
								formControlName="name"
								matInput
								placeholder="Name *"
								type="text">
						<mat-error *ngIf="addressFormGroup.get('name').hasError('required')">
							Name is required
						</mat-error>
					</mat-form-field>

					<mat-form-field fxFlex>
						<input
								formControlName="line1"
								matInput
								placeholder="Address Line 1 *"
								type="text">
						<mat-error *ngIf="addressFormGroup.get('line1').hasError('required')">
							Address Line 1 is required
						</mat-error>
					</mat-form-field>

					<mat-form-field fxFlex>
						<input
								formControlName="line2"
								matInput
								placeholder="Address Line 2"
								type="text">
					</mat-form-field>

					<mat-form-field fxFlex>
						<input
								formControlName="city"
								matInput
								placeholder="City *"
								type="text">
						<mat-error *ngIf="addressFormGroup.get('city').hasError('required')">
							City is required
						</mat-error>
					</mat-form-field>

					<div>
						<div fxLayout="row" fxLayoutGap="10px">
							<mat-form-field style="width:200px;">
								<mat-label>State *</mat-label>
								<mat-select formControlName="state" name="state">
									<mat-option>None</mat-option>
									<mat-option *ngFor="let state of stateOptions" [value]="state.value">
										{{state.name}} ({{state.value}})
									</mat-option>
								</mat-select>
								<mat-error *ngIf="addressFormGroup.get('state').hasError('required')">
									State is required
								</mat-error>
							</mat-form-field>
							<mat-form-field style="width:100px;">
								<input
										formControlName="zip"
										matInput
										placeholder="ZIP Code *"
										type="text">
								<mat-error *ngIf="addressFormGroup.get('zip').hasError('required')">
									ZIP Code is required
								</mat-error>
							</mat-form-field>
						</div>
					</div>
				</form>
			</mat-card-content>
			<mat-card-actions>
				<button *ngIf="isEditingAddressForm"
				        mat-button
				        color="accent"
				        type="button"
				        (click)="addressFormCancel()">
					Cancel
				</button>
				<button *ngIf="!isEditingAddressForm"
				        mat-button
				        color="accent"
				        type="button"
				        (click)="addressFormEdit()">
					Edit
				</button>
				<button
						[disabled]="!isEditingAddressForm || addressFormGroup.pristine"
						mat-button
						color="accent"
						type="submit"
						(click)="addressFormSubmit()">
					Save
				</button>
			</mat-card-actions>
		</mat-card>

		<mat-card>
			<mat-card-header>
				<mat-card-title>Phone Preferences</mat-card-title>
			</mat-card-header>
			<mat-card-content>

			</mat-card-content>
		</mat-card>

		<mat-card>
			<mat-card-header>
				<mat-card-title>Email Preferences</mat-card-title>
			</mat-card-header>
			<mat-card-content>
				<ng-container *ngFor="let emailForm of emailFormArray.controls; let index=index; let last=last">
					<form [formGroup]="emailForm" fxLayout="column" fxLayoutGap="5px" fxFill>
						<mat-form-field fxFlex>
							<input
									formControlName="emailAddress"
									matInput
									placeholder="Email Address *"
									type="email">
							<mat-error *ngIf="emailForm.get('emailAddress').hasError('required')">
								Email address is required
							</mat-error>
							<mat-error *ngIf="emailForm.get('emailAddress').hasError('email')">
								Email address is not formatted correctly
							</mat-error>
						</mat-form-field>

						<mat-form-field fxFlex>
							<input
									formControlName="name"
									matInput
									placeholder="Contact Name *"
									type="text">
							<mat-error *ngIf="emailForm.get('name').hasError('required')">
								Contact name is required
							</mat-error>
						</mat-form-field>

<!--						<div>-->
<!--							<div fxLayout="row" fxLayoutGap="10px" fxLayoutWrap>-->
								<div style="width:150px">
									<mat-checkbox
											color="primary"
											formControlName="emailPromos">
										Promotions
									</mat-checkbox>
									<span *ngIf="displayTooltips">
										<button #tooltip="matTooltip"
										        matTooltip="Special offers and promotions. Generally once per month."
										        matTooltipPosition="right"
										        mat-icon-button
										        type="button"
										        aria-tooltip="Button that toggles a tooltip"
										        (click)="tooltip.toggle()">
											<mat-icon color="accent">help_outline</mat-icon>
										</button>
									</span>
								</div>

								<div style="width:150px">
									<mat-checkbox
											color="primary"
											formControlName="emailReminders">
										Reminders
									</mat-checkbox>
									<span *ngIf="displayTooltips">
										<button #tooltip="matTooltip"
										        matTooltip="Oil change and recommended service reminders"
										        matTooltipPosition="right"
										        mat-icon-button
										        aria-tooltip="Button that toggles a tooltip"
										        type="button"
										        (click)="tooltip.toggle()">
											<mat-icon color="accent">help_outline</mat-icon>
										</button>
									</span>
								</div>

								<div style="width:150px">
									<mat-checkbox
											color="primary"
											formControlName="emailStatements">
										Statements
									</mat-checkbox>
									<span *ngIf="displayTooltips">
										<button #tooltip="matTooltip"
										        matTooltip="Your monthly account statements"
										        matTooltipPosition="right"
										        mat-icon-button
										        aria-tooltip="Button that toggles a tooltip"
										        type="button"
										        (click)="tooltip.toggle()">
											<mat-icon color="accent">help_outline</mat-icon>
										</button>
									</span>
								</div>

								<div style="width:150px">
									<mat-checkbox
											color="primary"
											formControlName="emailVIP">
										VIP Rewards
									</mat-checkbox>
									<span *ngIf="displayTooltips">
										<button #tooltip="matTooltip"
										        matTooltip="Reward Points status and thank you"
										        matTooltipPosition="right"
										        mat-icon-button
										        aria-tooltip="Button that toggles a tooltip"
										        type="button"
										        (click)="tooltip.toggle()">
											<mat-icon color="accent">help_outline</mat-icon>
										</button>
									</span>
								</div>
<!--							</div>-->
<!--						</div>-->

						<button
								[disabled]="!isEditingEmailForm"
								mat-raised-button
								mat-button
								color="primary"
								type="button"
								(click)="removeEmailAddress(index)">
							Delete email address
						</button>
						<button *ngIf="last"
								[disabled]="!isEditingEmailForm"
						        mat-button
						        mat-raised-button
						        type="button"
						        color="accent"
						        (click)="addEmailAddress()">
							Add email address
						</button>

					</form>
					<ng-container *ngIf="emailFormArray.controls.length > 1">
						<div class="dynamic-contact-form-spacer"></div>
						<mat-divider></mat-divider>
						<div class="dynamic-contact-form-spacer"></div>
					</ng-container>

				</ng-container>
			</mat-card-content>
			<mat-card-actions>
				<button *ngIf="isEditingEmailForm"
				        mat-button
				        color="accent"
				        type="button"
				        (click)="emailFormCancel()">
					Cancel
				</button>
				<button *ngIf="!isEditingEmailForm"
				        mat-button
				        color="accent"
				        type="button"
				        (click)="emailFormEdit()">
					Edit
				</button>
				<button
						[disabled]="!isEditingEmailForm || (isEditingEmailForm && emailFormArray.pristine && emailFormArray.controls.length > 0)"
						mat-button
						color="accent"
						type="submit"
						(click)="emailFormSubmit()">
					Save
				</button>
			</mat-card-actions>
		</mat-card>
	</div>
</div>
